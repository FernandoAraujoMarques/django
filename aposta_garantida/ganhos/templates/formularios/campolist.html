<!DOCTYPE html>

<html lang="en">
<style>
        #myTable1 {
            max-width: 70%;
            margin: 0 auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }
</style>

<head>
    <meta charset="UTF-8">
</head>

<body>

{% extends 'base.html' %}

{% block content %}

<div class=".betting-table" id="myTable1">
    <table class="table1">
      <tr>
        <th>Lucro_Total</th>
        <th>Apostas_Pendente</th>
        <th>Lucro_Pendente</th>
          <th>Lucro_%</th>
        <th>Ocultar_Ganhou</th>
        <th>Mostrar_Tudo</th>
      </tr>
      <tr>
        <td>{{ total_valor|default:"0.00" }}</td>
        <td>{{ total_valor_pendente|default:"0.00" }}</td>
        <td>{{ l_pendente }}</td>
        <td>{{ P_lucro }}</td>
        <td><button onclick="ocultarLinhasPendentes()">Ocultar</button></td>
        <td><button onclick="mostrarLinhasPendentes()">Mostrar</button></td>
      </tr>
    </table>
</div>

<br></br>

<div class=".betting-table" id="myTable">
        <table class="table">
          <tr>
              <th> Data </th>
              <th> Hora </th>
              <th> Casa </th>
              <th> Vr_Investido </th>
              <th> Status </th>
              <th> ODD </th>
              <th> Lucro </th>
              <th> Opcoes </th>
          </tr>

            {% for member in object_list %}
            <tr>
                <td>{{ member.data }}</td>
                <td>{{ member.hora }}</td>
                <td>{{ member.casa }}</td>
                <td>{{ member.valor }}</td>
                <td class="status">{{ member.status }}</td>
                <td>{{ member.odd }}</td>
                <td>{{ member.ganho }}</td>
                <td>
                    <a href="{% url 'editar-status' member.pk %}" class="fa fa-pencil fa-lg" style="color: blue;"></a>
                    <a href="{% url 'deleta-campo' member.pk %}" class="fa fa-trash fa-lg" style="color: red;"></a>
                </td>
            </tr>

            {% empty %}
            <tr>
                <td colspan="3"> Nada </td>
            </tr>

            {% endfor %}

        </table>

        <div>
            <label for="filtroData">Filtrar por Data:</label>
            <select id="filtroData">
                <option value="">Todas as Datas</option>
            </select>
        </div>

</div>

{% endblock %}

<div>
    <select id="countriesDropdown" oninput="filterTable()">
        <option>All</option>
        <option>Sweden</option>
        <option>Germany</option>
      </select>
      
      <table id="myTable">
        <tr><th>Name</th><th>Country</th></tr><!-- header row uses 'th' instead of 'td' -->
        <tr><td>Inga</td><td>Sweden</td></tr>
        <tr><td>Helena</td><td>Sweden</td></tr>
        <tr><td>Hans</td><td>Germany</td></tr>
        <tr><td>Anna</td><td>Germany</td></tr>
      </table>
</div>

<script>
    function filterTable() {
        // Variables
        let dropdown, table, rows, cells, country, filter;
        dropdown = document.getElementById("countriesDropdown");
        table = document.getElementById("myTable");
        rows = table.getElementsByTagName("tr");
        filter = dropdown.value;
    
        // Loops through rows and hides those with countries that don't match the filter
        for (let row of rows) { // `for...of` loops through the NodeList
        cells = row.getElementsByTagName("td");
        country = cells[1] || null; // gets the 2nd `td` or nothing
        // if the filter is set to 'All', or this is the header row, or 2nd `td` text matches filter
        if (filter === "All" || !country || (filter === country.textContent)) {
            row.style.display = ""; // shows this row
        }
        else {
            row.style.display = "none"; // hides this row
        }
        }
    }
</script>

<!-- Inclua a biblioteca jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- Adicione este script abaixo da inclusão da biblioteca jQuery -->
<script>
    $(document).ready(function () {
        // Inicialize o menu suspenso de datas
        var uniqueDates = [];

        // Percorre as células da coluna "Data" e extrai os valores únicos
        $("#myTable tbody td:first-child").each(function () {
            var dateValue = $(this).text();
            console.log(dateValue);

            if (!uniqueDates.includes(dateValue)) {
                uniqueDates.push(dateValue);
            }
        });

        // Preenche as opções no menu suspenso com os valores únicos
        $.each(uniqueDates, function (index, value) {
            $("#filtroData").append('<option value="' + value + '">' + value + '</option>');
        });

        // Atualiza a tabela ao selecionar uma data
        $("#filtroData").change(function () {
            var dataSelecionada = $(this).val();

            // Oculta todas as linhas da tabela
            $("#myTable tbody tr").hide();

            // Exibe apenas as linhas com a data selecionada
            $("#myTable tbody td:first-child:contains('" + dataSelecionada + "')").parent().show();
        });
    });
</script>

<!-- Adicione este código HTML para o menu suspenso -->
<div>
    <label for="filtroData">Filtrar por Data:</label>
    <select id="filtroData">
        <option value="">Todas as Datas</option>
    </select>
</div>


</body>
</html>
